{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{auth,db}from'../firebaseConfig';import{createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,sendPasswordResetEmail,onAuthStateChanged,sendEmailVerification}from'firebase/auth';import{setDoc,doc}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/React.createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);const[loading,setLoading]=useState(true);function register(email,password,firstName,lastName){return createUserWithEmailAndPassword(auth,email,password).then(async userCredential=>{await sendEmailVerification(userCredential.user);return setDoc(doc(db,'users',userCredential.user.uid),{firstName,lastName,email});});}function login(email,password){return signInWithEmailAndPassword(auth,email,password);}function logout(){return signOut(auth);}function resetPassword(email){return sendPasswordResetEmail(auth,email);}useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{setCurrentUser(user);setLoading(false);});return unsubscribe;},[]);const value={currentUser,loading,register,login,logout,resetPassword};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});}","map":{"version":3,"names":["React","useContext","useState","useEffect","auth","db","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","sendPasswordResetEmail","onAuthStateChanged","sendEmailVerification","setDoc","doc","jsx","_jsx","AuthContext","createContext","useAuth","AuthProvider","_ref","children","currentUser","setCurrentUser","loading","setLoading","register","email","password","firstName","lastName","then","userCredential","user","uid","login","logout","resetPassword","unsubscribe","value","Provider"],"sources":["/Users/iantoyota/Desktop/my-mindscape/src/contexts/AuthContext.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { auth, db } from '../firebaseConfig';\nimport { \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword, \n  signOut, \n  sendPasswordResetEmail, \n  onAuthStateChanged, \n  sendEmailVerification \n} from 'firebase/auth';\nimport { setDoc, doc } from 'firebase/firestore';\n\nconst AuthContext = React.createContext();\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  function register(email, password, firstName, lastName) {\n    return createUserWithEmailAndPassword(auth, email, password)\n      .then(async (userCredential) => {\n        await sendEmailVerification(userCredential.user);\n        return setDoc(doc(db, 'users', userCredential.user.uid), {\n          firstName,\n          lastName,\n          email\n        });\n      });\n  }\n\n  function login(email, password) {\n    return signInWithEmailAndPassword(auth, email, password);\n  }\n\n  function logout() {\n    return signOut(auth);\n  }\n\n  function resetPassword(email) {\n    return sendPasswordResetEmail(auth, email);\n  }\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      setCurrentUser(user);\n      setLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const value = {\n    currentUser,\n    loading,\n    register,\n    login,\n    logout,\n    resetPassword\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC9D,OAASC,IAAI,CAAEC,EAAE,KAAQ,mBAAmB,CAC5C,OACEC,8BAA8B,CAC9BC,0BAA0B,CAC1BC,OAAO,CACPC,sBAAsB,CACtBC,kBAAkB,CAClBC,qBAAqB,KAChB,eAAe,CACtB,OAASC,MAAM,CAAEC,GAAG,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEjD,KAAM,CAAAC,WAAW,cAAGhB,KAAK,CAACiB,aAAa,CAAC,CAAC,CAEzC,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAjB,UAAU,CAACe,WAAW,CAAC,CAChC,CAEA,MAAO,SAAS,CAAAG,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAE5C,QAAS,CAAAwB,QAAQA,CAACC,KAAK,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,QAAQ,CAAE,CACtD,MAAO,CAAAxB,8BAA8B,CAACF,IAAI,CAAEuB,KAAK,CAAEC,QAAQ,CAAC,CACzDG,IAAI,CAAC,KAAO,CAAAC,cAAc,EAAK,CAC9B,KAAM,CAAArB,qBAAqB,CAACqB,cAAc,CAACC,IAAI,CAAC,CAChD,MAAO,CAAArB,MAAM,CAACC,GAAG,CAACR,EAAE,CAAE,OAAO,CAAE2B,cAAc,CAACC,IAAI,CAACC,GAAG,CAAC,CAAE,CACvDL,SAAS,CACTC,QAAQ,CACRH,KACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACN,CAEA,QAAS,CAAAQ,KAAKA,CAACR,KAAK,CAAEC,QAAQ,CAAE,CAC9B,MAAO,CAAArB,0BAA0B,CAACH,IAAI,CAAEuB,KAAK,CAAEC,QAAQ,CAAC,CAC1D,CAEA,QAAS,CAAAQ,MAAMA,CAAA,CAAG,CAChB,MAAO,CAAA5B,OAAO,CAACJ,IAAI,CAAC,CACtB,CAEA,QAAS,CAAAiC,aAAaA,CAACV,KAAK,CAAE,CAC5B,MAAO,CAAAlB,sBAAsB,CAACL,IAAI,CAAEuB,KAAK,CAAC,CAC5C,CAEAxB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmC,WAAW,CAAG5B,kBAAkB,CAACN,IAAI,CAAE6B,IAAI,EAAI,CACnDV,cAAc,CAACU,IAAI,CAAC,CACpBR,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CAEF,MAAO,CAAAa,WAAW,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,KAAK,CAAG,CACZjB,WAAW,CACXE,OAAO,CACPE,QAAQ,CACRS,KAAK,CACLC,MAAM,CACNC,aACF,CAAC,CAED,mBACEtB,IAAA,CAACC,WAAW,CAACwB,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAlB,QAAA,CAChC,CAACG,OAAO,EAAIH,QAAQ,CACD,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}